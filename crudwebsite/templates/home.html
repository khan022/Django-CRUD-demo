{% extends 'base.html' %}

{% block content %}

<div class="col-md-9 offset-md-2">
    
    {% if user.is_authenticated %}

    <table class="table table-striped table-hover table-bordered">
        <thead>
          <tr class="table-dark">
            <th scope="col">Name</th>
            <th scope="col">Email</th>
            <th scope="col">Phone</th>
            <th scope="col">Address</th>
            <th scope="col">City</th>
            <th scope="col">State</th>
            <th scope="col">Zipcode</th>
            <th scope="col">Created at</th>
            <th scope="col">ID</th>
          </tr>
        </thead>
        <tbody class="table-group-divider">
            {% if records %}
                {% for record in records %}
                    <tr class="align-middle">
                        <td>
                            <a href="{% url 'record' record.id %}">
                                {{ record.first_name }} {{ record.last_name }}
                            </a>
                        </td>
                        <td>{{ record.email }}</td>
                        <td>{{ record.phone }}</td>
                        <td>{{ record.address }}</td>
                        <td>{{ record.city }}</td>
                        <td>{{ record.state }}</td>
                        <td>{{ record.zipcode }}</td>
                        <td>{{ record.created_at }}</td>
                        <td><a href="{% url 'record' record.id %}">{{ record.id }}</a>
                        </td>
                    </tr>
                {% endfor %}
            {% endif %}
        </tbody>
  </table>
  
  <a href="{% url 'export_records' %}" class="btn btn-danger">Export to Excel</a>


    <form action="{% url 'export_records_fil' %}" method="get">

        {% csrf_token %} 

        <label for="first_name">First Name:</label>
        <input type="text" id="first_name" name="first_name"><br><br>
        <label for="last_name">Last Name:</label>
        <input type="text" id="last_name" name="last_name"><br><br>
        <label for="email">Email:</label>
        <input type="text" id="email" name="email"><br><br>
        <label for="phone">Phone:</label>
        <input type="text" id="phone" name="phone"><br><br>
        <label for="address">Address:</label>
        <input type="text" id="address" name="address"><br><br>
        <label for="city">City:</label>
        <input type="text" id="city" name="city"><br><br>
        <label for="state">State:</label>
        <input type="text" id="state" name="state"><br><br>
        <label for="zipcode">Zipcode:</label>
        <input type="text" id="zipcode" name="zipcode"><br><br>
        <input type="submit" value="Export to Excel">
    </form>

    <form action="{% url 'export_records_time' %}" method="get">

        {% csrf_token %} 

        <label for="start_date">Start Date:</label>
        <input type="datetime-local" id="start_date" name="start_date" min="{{ earliest_time|date:'Y-m-d\TH:i' }}" max="{{ latest_time|date:'Y-m-d\TH:i' }}"><br><br>
        <label for="end_date">End Date:</label>
        <input type="datetime-local" id="end_date" name="end_date" min="{{ earliest_time|date:'Y-m-d\TH:i' }}" max="{{ latest_time|date:'Y-m-d\TH:i' }}"><br><br>
        <input type="submit" value="Export to Excel">

    </form>


</div>

    {% else %}
    <div class="col-md-6 offset-md-3">

    <h1>Login!</h1>
    <br/>
    <form method="POST" action="{% url 'home' %}">
       {% csrf_token %} 
        <div class="mb-3">
        <!-- <label for="exampleInputEmail1" class="form-label">Email address</label> -->
        <input type="text" class="form-control" name="username", placeholder="User Name" required>
        <!-- <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp"> -->
        <!-- <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div> -->
        </div><br/>
        <div class="mb-3">
        <!-- <label for="exampleInputPassword1" class="form-label">Password</label> -->
        <input type="password" class="form-control" name="password", placeholder="Password" required>
        </div>
        <!-- <div class="mb-3 form-check">
        <input type="checkbox" class="form-check-input" id="exampleCheck1">
        <label class="form-check-label" for="exampleCheck1">Check me out</label>
        </div> -->
        <br/>
        <button type="submit" class="btn btn-secondary">Login</button>
    </form>
</div>

{% endif %}

{% endblock %}
